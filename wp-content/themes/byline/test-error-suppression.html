<!DOCTYPE html>
<html>
<head>
    <title>Test Error Suppression</title>
</head>
<body>
    <h1>LiveBlog Error Suppression Test</h1>
    
    <h2>Instructions:</h2>
    <ol>
        <li>Open your browser's Developer Tools (F12)</li>
        <li>Go to the Console tab</li>
        <li>Navigate to a LiveBlog post edit page</li>
        <li>Look for these messages in the console:</li>
        <ul>
            <li><code>=== LiveBlog TinyMCE Error Suppression Active ===</code></li>
            <li><code>Print plugin error suppression is active</code></li>
            <li><code>Monitoring for: ["Failed to load plugin: print", "print/plugin.min.js", "print plugin"]</code></li>
        </ul>
        <li>If you see any print plugin errors, they should be followed by:</li>
        <ul>
            <li><code>✅ Suppressed print plugin error (functionality working correctly)</code></li>
            <li><code>✅ Suppressed print plugin script error</code></li>
            <li><code>✅ Suppressed print plugin loading error</code></li>
            <li><code>✅ Intercepted print plugin fetch request</code></li>
            <li><code>✅ Prevented print plugin from loading</code></li>
            <li><code>✅ Prevented print plugin script from being added</code></li>
        </ul>
    </ol>
    
    <h2>Test the Error Suppression:</h2>
    <p>Click the button below to simulate the print plugin error and see if it's suppressed:</p>
    <button onclick="testErrorSuppression()">Test Error Suppression</button>
    
    <script>
    function testErrorSuppression() {
        console.log('Testing error suppression...');
        
        // Simulate the print plugin error
        console.error('Failed to load plugin: print from url http://localhost:8888/byline-wp/wp-includes/js/tinymce/plugins/print/plugin.min.js');
        
        // Simulate a script loading error
        var error = new Error('Failed to load plugin: print');
        error.filename = 'http://localhost:8888/byline-wp/wp-includes/js/tinymce/plugins/print/plugin.min.js';
        window.dispatchEvent(new ErrorEvent('error', { error: error, filename: error.filename }));
        
        console.log('Test completed. Check if the errors above were suppressed.');
    }
    
    // Check if error suppression is active
    if (typeof console !== 'undefined' && console.error) {
        var originalError = console.error;
        console.error = function() {
            var args = Array.prototype.slice.call(arguments);
            var message = args.join(' ');
            
            if (message.includes('Failed to load plugin: print') || 
                message.includes('print/plugin.min.js') ||
                message.includes('print plugin')) {
                console.log('✅ Error suppression is working! Suppressed:', message);
                return;
            }
            
            originalError.apply(console, args);
        };
        console.log('Error suppression test script loaded');
    }
    </script>
</body>
</html> 